<!-- nigeria_lga/static/src/xml/dashboard_templates.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- Main Dashboard Template -->
    <t t-name="nigeria_lga.Dashboard" owl="1">
        <div class="o_nigeria_lga_dashboard">
            <!-- Header Section -->
            <div class="dashboard-header">
                <div class="container-fluid">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <h1 class="dashboard-title">
                                <i class="fa fa-map-o me-2"/>
                                Nigeria States &amp; LGA Management
                            </h1>
                            <p class="dashboard-subtitle text-muted">
                                Comprehensive administrative division management by Supreme Stack
                            </p>
                        </div>
                        <div class="col-lg-6 text-end">
                            <button class="btn btn-primary me-2" t-on-click="refreshData">
                                <i class="fa fa-refresh"/> Refresh
                            </button>
                            <button class="btn btn-success" t-on-click="exportToExcel">
                                <i class="fa fa-download"/> Export Excel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Loading State -->
            <div t-if="state.loading" class="text-center py-5">
                <i class="fa fa-spinner fa-spin fa-3x text-primary"/>
                <p class="mt-3">Loading dashboard data...</p>
            </div>
            
            <!-- Main Content -->
            <div t-else="" class="dashboard-content">
                <div class="container-fluid">
                    <!-- Statistics Cards -->
                    <div class="row mb-4">
                        <!-- Total States Card -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="stat-card" t-on-click="openStates">
                                <div class="stat-card-body">
                                    <div class="stat-icon states-icon">
                                        <i class="fa fa-map-marker fa-2x"/>
                                    </div>
                                    <div class="stat-details">
                                        <h2 class="stat-value" t-esc="state.statesCount"/>
                                        <p class="stat-label">Nigerian States</p>
                                        <small class="text-muted">Including FCT</small>
                                    </div>
                                </div>
                                <div class="stat-card-footer">
                                    <span class="text-primary">
                                        <i class="fa fa-arrow-right"/> View All
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Total LGAs Card -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="stat-card" t-on-click="openLGAs">
                                <div class="stat-card-body">
                                    <div class="stat-icon lgas-icon">
                                        <i class="fa fa-building fa-2x"/>
                                    </div>
                                    <div class="stat-details">
                                        <h2 class="stat-value" t-esc="state.lgasCount"/>
                                        <p class="stat-label">Local Government Areas</p>
                                        <small class="text-muted">Across all states</small>
                                    </div>
                                </div>
                                <div class="stat-card-footer">
                                    <span class="text-info">
                                        <i class="fa fa-arrow-right"/> View All
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Geopolitical Zones Card -->
                        <div class="col-lg-4 col-md-6 mb-3">
                            <div class="stat-card">
                                <div class="stat-card-body">
                                    <div class="stat-icon zones-icon">
                                        <i class="fa fa-globe fa-2x"/>
                                    </div>
                                    <div class="stat-details">
                                        <h2 class="stat-value">6</h2>
                                        <p class="stat-label">Geopolitical Zones</p>
                                        <small class="text-muted">Regional divisions</small>
                                    </div>
                                </div>
                                <div class="stat-card-footer">
                                    <span class="text-success">
                                        <i class="fa fa-check"/> Complete Coverage
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Search Section -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="search-section card">
                                <div class="card-body">
                                    <h5 class="card-title mb-3">
                                        <i class="fa fa-search"/> Quick Search
                                    </h5>
                                    <div class="input-group">
                                        <input type="text" 
                                               class="form-control form-control-lg" 
                                               placeholder="Search for state or LGA..."
                                               t-model="state.searchQuery"
                                               t-on-keyup="searchLocation"/>
                                        <button class="btn btn-primary" t-on-click="searchLocation">
                                            <i class="fa fa-search"/> Search
                                        </button>
                                        <button class="btn btn-secondary" 
                                                t-on-click="clearSearch"
                                                t-if="state.searchQuery">
                                            <i class="fa fa-times"/> Clear
                                        </button>
                                    </div>
                                    
                                    <!-- Search Results -->
                                    <div t-if="state.searchResults.length > 0" class="search-results mt-3">
                                        <h6>Search Results:</h6>
                                        <ul class="list-group">
                                            <li t-foreach="state.searchResults" 
                                                t-as="result" 
                                                t-key="result.id"
                                                class="list-group-item">
                                                <t t-esc="result.name"/>
                                                <span class="badge bg-secondary ms-2" t-esc="result.type"/>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Geopolitical Zones Section -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="zones-section card">
                                <div class="card-body">
                                    <h5 class="card-title mb-4">
                                        <i class="fa fa-map"/> States by Geopolitical Zone
                                    </h5>
                                    <div class="row">
                                        <div t-foreach="state.statesByZone" 
                                             t-as="zone" 
                                             t-key="zone.zone"
                                             class="col-lg-4 col-md-6 mb-3">
                                            <div class="zone-card" 
                                                 t-on-click="() => openZoneStates(zone)"
                                                 t-attf-style="border-left: 4px solid {{ zone.color }};">
                                                <div class="zone-header">
                                                    <h6 class="zone-name" t-esc="zone.name"/>
                                                    <span class="badge bg-primary" t-esc="zone.count + ' States'"/>
                                                </div>
                                                <div class="zone-stats">
                                                    <div class="progress" style="height: 10px;">
                                                        <div class="progress-bar" 
                                                             t-attf-style="width: {{ (zone.count / 37 * 100) }}%; background-color: {{ zone.color }};"
                                                             role="progressbar"/>
                                                    </div>
                                                    <small class="text-muted mt-1">
                                                        <t t-esc="Math.round(zone.count / 37 * 100)"/>% of total states
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Charts Section -->
                    <div class="row">
                        <!-- Zone Distribution Chart -->
                        <div class="col-lg-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fa fa-pie-chart"/> Zone Distribution
                                    </h5>
                                    <div t-ref="zoneChart" class="chart-container" style="height: 300px;">
                                        <!-- Chart will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Population Chart -->
                        <div class="col-lg-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fa fa-bar-chart"/> Top States by Population
                                    </h5>
                                    <div t-ref="populationChart" class="chart-container" style="height: 300px;">
                                        <!-- Chart will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="dashboard-footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 text-center">
                            <p class="mb-0">
                                <small class="text-muted">
                                    Powered by <a href="https://supremestack.net" target="_blank">Supreme Stack</a> 
                                    | Enterprise Odoo Solutions for Africa
                                </small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
    
    <!-- LGA Widget Template -->
    <t t-name="nigeria_lga.LGAWidget" owl="1">
        <div class="o_nigeria_lga_widget">
            <div class="row g-2">
                <!-- State Selection -->
                <div class="col-md-6">
                    <label class="form-label">Nigerian State</label>
                    <select class="form-select" 
                            t-on-change="onStateChange"
                            t-att-disabled="state.loading">
                        <option value="">-- Select State --</option>
                        <option t-foreach="state.states" 
                                t-as="stateOption" 
                                t-key="stateOption.id"
                                t-att-value="stateOption.id"
                                t-att-selected="stateOption.id === state.selectedState">
                            <t t-esc="stateOption.name"/>
                        </option>
                    </select>
                </div>
                
                <!-- LGA Selection -->
                <div class="col-md-6">
                    <label class="form-label">Local Government Area</label>
                    <select class="form-select" 
                            t-on-change="onLGAChange"
                            t-att-disabled="!state.selectedState or state.loading">
                        <option value="">-- Select LGA --</option>
                        <option t-foreach="state.lgas" 
                                t-as="lgaOption" 
                                t-key="lgaOption.id"
                                t-att-value="lgaOption.id"
                                t-att-selected="lgaOption.id === state.selectedLGA">
                            <t t-esc="lgaOption.name"/>
                        </option>
                    </select>
                </div>
            </div>
            
            <!-- Loading indicator -->
            <div t-if="state.loading" class="text-center mt-2">
                <small class="text-muted">
                    <i class="fa fa-spinner fa-spin"/> Loading...
                </small>
            </div>
        </div>
    </t>
    
    <!-- Map View Template -->
    <t t-name="nigeria_lga.MapView" owl="1">
        <div class="o_nigeria_map_view">
            <div class="map-header p-3 bg-light border-bottom">
                <h4>
                    <i class="fa fa-map-o"/> Nigeria Interactive Map
                </h4>
                <p class="text-muted mb-0">
                    Click on any state to view details
                </p>
            </div>
            
            <!-- Loading State -->
            <div t-if="state.loading" class="text-center py-5">
                <i class="fa fa-spinner fa-spin fa-3x text-primary"/>
                <p class="mt-3">Loading map data...</p>
            </div>
            
            <!-- Map Container -->
            <div t-else="" class="map-body">
                <div t-ref="mapContainer" class="map-container" style="min-height: 500px;">
                    <!-- Map will be rendered here -->
                </div>
                
                <!-- Legend -->
                <div class="map-legend">
                    <h6>Geopolitical Zones</h6>
                    <div class="legend-items">
                        <div class="legend-item">
                            <span class="legend-color" style="background: #3498db;"></span>
                            North Central
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #9b59b6;"></span>
                            North East
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #e74c3c;"></span>
                            North West
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #f39c12;"></span>
                            South East
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #2ecc71;"></span>
                            South South
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #1abc9c;"></span>
                            South West
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
